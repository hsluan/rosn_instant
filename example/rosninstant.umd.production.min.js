!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).ROSNInstant={})}(this,(function(e){"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}var t=function(){function e(e){this.listeners=new Map,this.listenerManager=e}var n=e.prototype;return n.addListener=function(e,n){this.listeners.set(e,n),this.listenerManager.add(e,n)},n.removeListener=function(e){var n=this.listeners.get(e);n&&(this.listenerManager.remove(e,n),this.listeners.delete(e))},n.on=function(e,n){this.removeListener(e),this.addListener(e,n)},n.once=function(e,n){var t=this;this.addListener(e,(function(o){n(o),t.removeListener(e)}))},n.off=function(e){this.listeners.has(e)&&this.removeListener(e)},n.clear=function(){var e=this;this.listeners.forEach((function(n,t){e.listenerManager.remove(t,n)})),this.listeners.clear()},e}();function o(e,n,t){void 0===t&&(t=null);var o={type:e,source:n,data:t||{}};"undefined"!=typeof RApp?RApp.postMessage(JSON.stringify(o)):console.log("emit: "+JSON.stringify(o))}var r=function(){function e(e){this.eventWrapper=new t({add:function(e,n){window.document.addEventListener(e,n)},remove:function(e,n){window.document.removeEventListener(e,n)}}),this.source=e}var r=e.prototype;return r.showAds=function(e){o("show_"+e.adsType+"_ads",this.source,n({},e))},r.startGame=function(){o("request_game_data",this.source)},r.emitCustomEvent=function(e,n){o(e,this.source,n)},r.on=function(e,n){this.eventWrapper.on(e,this.transform(n))},r.off=function(e){this.eventWrapper.off(e)},r.once=function(e,n){this.eventWrapper.once(e,this.transform(n))},r.clear=function(){this.eventWrapper.clear()},r.transform=function(e){return function(n){e(n.detail?"string"==typeof n.detail?JSON.parse(n.detail):n.detail:{detail:{},message:"Detail NULL"})}},e}(),i=function(){function e(){}return e.parseParameters=function(e,n,t){if(void 0===t){var o="function"==typeof e;n?(t=n,o||(n=null)):null===n&&o&&(t=e,e=null,n=null),null!==n&&o&&(n=e,e=null)}return{options:e=e||Object.create(null),onProgress:n,onComplete:t}},e.downloadScript=function(n){return e.downloadScriptWeb(n)},e.downloadScriptWeb=function(n){return new Promise((function(t,o){var r=e.parseParameters(i,null,s),i=r.options,s=r.onComplete;if(e.downloaded[n])t();else{var a=document,u=document.createElement("script");u.async=i.async,u.src=n;var c=function o(){var r;null==(r=u.parentNode)||r.removeChild(u),u.removeEventListener("load",o,!1),u.removeEventListener("error",d,!1),e.downloaded[n]=!0,t()},d=function e(){var t;null==(t=u.parentNode)||t.removeChild(u),u.removeEventListener("load",c,!1),u.removeEventListener("error",e,!1),console.log("ScriptDownloader:downloadScriptWeb - Cannot load "+n),o()};u.addEventListener("load",c,!1),u.addEventListener("error",d,!1),a.body.appendChild(u)}}))},e}();i.downloaded={};var s=function(){function e(){}return e.makeRequestUrl=function(e,n,t,o){return void 0===t&&(t={}),void 0===o&&(o=""),new Promise((function(r,i){var s=new XMLHttpRequest;s.open(n,e,!0),s.setRequestHeader("Content-type","application/json"),o&&s.setRequestHeader("x-access-token",o),s.onreadystatechange=function(){4===s.readyState&&(s.status>=200&&s.status<300?r(s.response):i({status:this.status,statusText:s.statusText}))},s.onerror=function(){i({status:this.status,statusText:s.statusText})},0==Object.keys(t).length?s.send():s.send(JSON.stringify(t))}))},e}(),a=new r("ROSNInstant-1.0.2"),u="$jshHgdn123&Am@n0te3+x";e.closeGame=function(){a.emitCustomEvent("close_game",{})},e.decrypt=function(e){return CryptoJS.AES.decrypt(e,u).toString(CryptoJS.enc.Utf8)},e.downloadScript=function(e){return i.downloadScript(e)},e.encryptKey=function(e){return CryptoJS.AES.encrypt(e,u).toString()},e.getSDKVersion=function(){return"1.0.2"},e.initializeAsync=function(){return new Promise((function(e){Promise.all([i.downloadScript("https://unpkg.com/crypto-js@4.1.1/crypto-js.js").then((function(e){return console.log(""+e)}))]).then((function(n){console.log("ROSNInstant version 1.0.2 initialize success",n),e({})})).catch((function(e){console.error(e)}))}))},e.injectDebug=function(){i.downloadScript("https://unpkg.com/vconsole@3.14.6/dist/vconsole.min.js").then((function(){"undefined"!=typeof VConsole&&(window.vConsole=new VConsole({theme:"dark"}))}))},e.makeRequest=function(e,n,t,o){return s.makeRequestUrl(e,n,t,o)},e.onPause=function(e){a.on("on_app_background",(function(){e&&e()}))},e.onResume=function(e){a.on("on_app_foreground",(function(){e&&e()}))},e.showAds=function(e,n,t){void 0===e&&(e={adsType:"interstitial",num:0,rewardType:"SCORE"}),void 0===n&&(n=function(){}),void 0===t&&(t=function(){});var o=["reward","interstitial"].find((function(n){return n===e.adsType}))||"interstitial";e.num=e.num||null;var r=function(){a.off("show_"+o+"_ad_success"),a.off("show_"+o+"_ad_fail")};a.on("show_"+o+"_ad_success",(function(e){r(),n(e)})),a.on("show_"+o+"_ad_fail",(function(){r(),t()})),a.showAds(e)},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=rosninstant.umd.production.min.js.map
